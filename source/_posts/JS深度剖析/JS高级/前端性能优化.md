---
title: 前端性能优化
categories:
  - JS深度剖析
  - JS高级
tags:
  - JS高级
abbrlink: 616f4683
date: 2022-09-16 14:41:13
---

## 减少 http 请求次数和请求资源大小
1. 合并压缩 webpack（代码比较少的情况下，尽可能使用内嵌式）；
2. 雪碧图：即 CSS Sprites，一种 CSS 图像合并技术，该方法是将小图标和背景图像合并到一张图片上，然后利用 CSS 的背景定位来显示需要显示的图片部分；
3. 图片 base64，将图片转换为 base64 的编码，此方式将图片直接嵌入到网页中，而不是从外部载入，这样就减少了 http 请求；
4. 尽量使用字体图标或者 SVG 图标，阿里的 iconfont；
5. 动态获取的图片：
    - 采用图片懒加载（数据也做异步分批加载：开始只请求加载第一屏的数据，滑动到第几屏在加载这一屏的数据和图片）；
    - 骨架屏技术（首屏内容由服务器渲染；再或者开始展示占位结构，客户端在单独获取数据渲染；）
6. 数据延迟分批加载(可以使用 srcoll 事件,判断数据列表和视口的相对位置)，srcoll 事件会频繁触发,使用防抖和节流函数；
7. 音视频取消预加载（播放的时候再去加载音视频文件，对于自动播放采取延迟播放的处理）；
8. 在客户端和服务器端进行信息交互的时候，对于多项数据尽可能基于 json 格式来进行传送（json 格式的数据处理方便，资源偏小）；
9. 服务器采用 gzip 压缩，加快网络传输，提高页面性能；
10. ....

## 建立缓存机制
1. 把一些请求回来的信息进行本地存储（缓存存储），在缓存有效期内，再次请求资源，直接从缓存中获取数据，而不是服务器上从新拉取；
2. 应用缓存：
    - DNS预获取：
    - 浏览器缓存：资源文件的强缓存和协商缓存（304）；
    - 本地缓存：数据也可以做缓存，把从服务器获取的数据存储到本地：cookie/localStorage/redux/vuex等，设定期限，在期限内，直接从本地获取数据即可；
    - 离线存储：（一般很少用）manifest；
    - cnd 区域分布式服务器开发部署（费钱  效果会非常的好）；

## 代码上的优化
1. 减少 dom 的重绘和回流；
2. 在 js 中尽量减少闭包的使用（内存优化）；
3. 在 js 中避免“嵌套循环”和“死循环”；
4. 尽可能使用事件委托；
5. 尽量减少 css 表达式的使用(expression)；
6. css 选择器解析规则是从右向左解析，基于 less/sass 开发的时候尽可能减少层级嵌套，目的是让选择器的前缀短一点；
7. 尽可能实现 js 的封装（低耦合高内聚），减少页面中的冗余代码；
8. 在 css 导入的时候尽量减少使用 @import 导入式；
9. 使用 window.requestAnimationFrame（js 中的帧动画）代替传统的定时器动画（能用 css3 动画的绝对不用 js动画）；
10. 减少递归的使用，避免死递归，避免由于递归导致的栈内存嵌套；
11. 基于 script 调取 js 的时候，可以使用 defer 或者 async 来异步加载；
12. ……
